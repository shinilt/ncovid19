<!DOCTYPE html>
<html lang="en">
<title>Corona Virus Updates and Statistics</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0 , maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
   
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
<script>
function getMapData() {
var mymap = L.map('mapid').setView([32.427908, 53.68804599999999], 2);
	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(mymap);
	
var myTotalmap = L.map('totalcasesmapid').setView([32.427908, 53.68804599999999], 2);
	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(myTotalmap);
	
	
var myNewCasemap = L.map('newcasemapid').setView([32.427908, 53.68804599999999], 2);
	L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	}).addTo(myNewCasemap);


  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {

    var txt = this.responseText;
	var obj = JSON.parse(txt);
	delete obj['Total:'];
	for (var x in obj) {

var circle = L.circle([obj[x].lat, obj[x].lon], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: obj[x].activecases * 60
}).addTo(mymap);
circle.bindPopup(x + ' : Active '+ obj[x].activecases);

var Totalcircle = L.circle([obj[x].lat, obj[x].lon], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: obj[x].totalcases * 30
}).addTo(myTotalmap);
Totalcircle.bindPopup(x + ' : Total '+ obj[x].totalcases);

if (obj[x].newcases != 0){
var NewCasecircle = L.circle([obj[x].lat, obj[x].lon], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: obj[x].newcases * 200
}).addTo(myNewCasemap);
NewCasecircle.bindPopup(x + ' : New '+ obj[x].newcases);}




	}

	}
	};

	  xhttp.open("GET", "/getmapdata", true);
  xhttp.send();
	}
</script>
<body onload="getMapData()">

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="/" class="w3-bar-item w3-button w3-theme-l1">Der Vorgarten</a>
    <a href="/" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Charts and Tables</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Maps</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white">Others</a>
  </div>
</div>

<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>
  <h4 class="w3-bar-item"><b>Menu</b></h4>
  <a class="w3-bar-item w3-button w3-hover-black" href="/">Charts and Tables</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#">Maps</a>
  
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">


	
  <br>
  <br>
  
 
  <div class="w3-row w3-padding-64">
    <div >
      <h1 class="w3-text-teal">Virus Spread plotted on the World map</h1>
      <p>The map shows the current number of active NCOVID-19 cases. The circles indicate the magnitude of the cases and not the regional boundary. Click/ tap on the circles to view the country and the details. Scale of the circles are different in each map for the purpose of fair visualization.</p>
	  <h1 class="w3-text-teal">Faster Spread - New Cases Map</h1>
	  <p>The map shows the recent confirmed cases. The virus spreads faster around these larger circles. You have to be really careful if you live around the larger circles. Scale used - 200.</p>
	  <div id="newcasemapid" style="width: 400px; height: 400px;"></div>
	  
	  <h1 class="w3-text-teal">Spread analysis - Active Cases Map</h1>
	  <p>The map shows the active cases. Larger circles indicate more active cases. Be careful if you move around the larger circles. Scale used - 60.</p>
	  <div id="mapid" style="width: 400px; height: 400px;"></div>
	  
	  
	  <h1 class="w3-text-teal">Spread analysis - All Cases Map</h1>
	  <p>The map shows total confirmed cases including the closed ones. This is meant for information on the damage suffered by each country. Scale used - 30.</p>
	  <div id="totalcasesmapid" style="width: 400px; height: 400px;"></div>
	  
	
	  
    </div>
    
  </div>



 



  <footer id="myFooter">
    <div class="w3-container w3-theme-l2 w3-padding-12">
      <h12>Built with js, plotly, leaflet-openstreetmap-mapbox, python with multiple modules and so on..</h12>
    </div>

    <div class="w3-container w3-theme-l1">
      <p>CSS Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </div>
  </footer>

<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
	document.getElementById("mapid").style.display = "block";
	document.getElementById("totalcasesmapid").style.display = "block";
	document.getElementById("newcasemapid").style.display = "block";
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
	document.getElementById("mapid").style.display = "none";
	document.getElementById("totalcasesmapid").style.display = "none";
	document.getElementById("newcasemapid").style.display = "none";
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  document.getElementById("mapid").style.display = "block";
  document.getElementById("totalcasesmapid").style.display = "block";
  document.getElementById("newcasemapid").style.display = "block";
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>

</body>
</html>
